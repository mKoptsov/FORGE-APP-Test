modules:
  jira:adminPage:
    - key: saving-token
      resource: save-token-ui
      title: Github Integration
      render: native
      resolver:
        function: save-token-fn

  webtrigger:
    - key: github-merge-trigger
      function: process-merge-event
      response:
        type: dynamic

  function:
    - key: save-token-fn
      handler: index.githubResolver
    - key: process-merge-event
      handler: index.handleMergePullRequestEvent


app:
  runtime:
    name: nodejs22.x
    memoryMB: 256
    architecture: arm64
  id: ari:cloud:ecosystem::app/ec273b70-3f36-44fe-9425-6d57a9eebfda

resources:
  - key: save-token-ui
    path: /ui/app.tsx
    tunnel:
      port: 5000
permissions:
  scopes:
    - storage:app
    - read:jira-work
    - write:jira-work
  external:
    fetch:
      backend:
        - https://github.com
        - https://api.github.com
